# Transaction
The most granular entity in the API, describes a movement of funds.

## Properties of a transaction
 * **uri**
    * the uri to this resource.
 * **type**
       * the [transaction type](#transaction-types).

 * **amount**
    * `decimal`
    * the amount in this `transaction`

##Transaction-types
###Cancel
A cancel transaction, this releases all available [reseved](#authorize) funds.

### Capture
A capture transaction, it captures funds from [reseved](#authorize).

### Credit
A credit transaction, it credits previously  [captured](#capture), paying them back to the consumer.

### Authorize
An authorize transaction, all transactions available in the api for a api-consumer have this transaction. It is not possible to repeat this transaction.
This transaction reserves funds, making them available for [capture](#capture) or [cancel](#cancel)

## Posting new transactions
To perform a capture, credit or cancel on a payment, the implementer must `POST` a transaction resource to the `payments` `transactions` list.
the resource is identical to the `transaction` recieved, but without a `uri` property, as this is generated by the API.

Posted transactions can only be of [Types](#transaction-types)  [Capture](#capture), [Credit](#credit) and [Cancel](#cancel).

Resource:  `/payments/{paymentId}/transactions/` Where `paymentId` is the `payment-id` recieved from the paymentsession through checkout.js.
This resource requires authentication, authorizing the owner of the payment. see [Authentication](authentication/#back-end-authentication)


### FIXME Supported HTTP Verbs
Method:    `POST`

### FIXME Example request and response for a `capture`
#### Request

```HTTP
POST scheme://host.tld/payments/94ac4cde-5cb1-4609-938d-8c510bcef1bb/transactions/ HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Token mybackendkeythatyoumustneverspillontotheinternet==

{  
  "amount": 199.00,
  "type": "Capture"  
}
```
####Response
```HTTP
HTTP/1.1 200 OK
Content-Type: application/json

{    
  "uri": "scheme://host.tld/payments/94ac4cde-5cb1-4609-938d-8c510bcef1bb/transactions/9450400",
  "amount": 199,
  "type": "Capture"  
}
```

##Retrieving an existing transaction
An implementer may request this resource to obtain the spesifics of a single transaction in a [payments](payment)' transaction chain

##Resource URI
Resource:  `/payments/{paymentId}/transactions/{transactionId}`, Where `paymentId` is the `payment-id` recieved from the paymentsession through checkout.js and the `transactionId` is the unique ID for this transaction
This resource requires authentication, authorizing the owner of the payment. see [Authentication](authentication/#back-end-authentication)


##Supported HTTP Verbs
Method:    `GET`

##Example request and response
##Request
```HTTP
GET scheme://host.tld/payments/94ac4cde-5cb1-4609-938d-8c510bcef1bb/transactions/9450400 HTTP/1.1
Accept: application/json
Authorization: Token mybackendkeythatyoumustneverspillontotheinternet==
```
##Response:
```HTTP
HTTP/1.1 200 OK
Content-Type: application/json

{    
  "uri": "scheme://host.tld/payments/94ac4cde-5cb1-4609-938d-8c510bcef1bb/transactions/9450400",
  "amount": 199,
  "type": "Authorize"  
}
```
##Possible other HTTP status codes
 * `404 Not Found`
 * `401 Unauthorized`
